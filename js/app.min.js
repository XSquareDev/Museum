-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&document.querySelector(".parallax__content").classList.add("active");const anchors=document.querySelectorAll('a[href*="#"]');for(let e of anchors)e.addEventListener("click",(function(t){t.preventDefault();const o=e.getAttribute("href");document.querySelector(""+o).scrollIntoView({behavior:"smooth",block:"start"})}));$(document).ready((function(){$(".welcome-slider").slick({dots:!0,speed:500,autoplaySpeed:4e3,autoplay:!0,infinite:!0,appendDots:".slider-buttons__squares",appendArrows:".slider-buttons__arrows",prevArrow:'<button class="slider-buttons__arrow-left arrow-button"><svg class="slider-buttons__svg slider-buttons__svg_left"><use xlink:href="#arrow"></use></svg></button>',nextArrow:'<button class="slider-buttons__arrow-right arrow-button"><svg class="slider-buttons__svg slider-buttons__svg_right"><use xlink:href="#arrow"></use></svg></button>'})}));const counter=document.querySelector(".counter__left");$(".welcome-slider").on("afterChange",(function(e,t,o,n){counter.innerText=`0${o+1}`})),mapboxgl.accessToken="pk.eyJ1IjoieXV1dHN5IiwiYSI6ImNrdXM5azBkZDF6cjgzMXAxemthb3pqbDYifQ.okUkXKnTnwRHXhfaD-0O1g";const map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:[2.3364,48.86091],zoom:15.75,showZoom:!0});map.addControl(new mapboxgl.NavigationControl),new mapboxgl.Marker({color:"#171717"}).setLngLat([2.3364,48.86091]).addTo(map),new mapboxgl.Marker({color:"#757575"}).setLngLat([2.3333,48.8602]).addTo(map),new mapboxgl.Marker({color:"#757575"}).setLngLat([2.3397,48.8607]).addTo(map),new mapboxgl.Marker({color:"#757575"}).setLngLat([2.333,48.8619]).addTo(map),new mapboxgl.Marker({color:"#757575"}).setLngLat([2.3365,48.8625]).addTo(map);const scrollTop=document.querySelector(".scroll-top");window.addEventListener("scroll",(()=>{window.pageYOffset>100?scrollTop.classList.add("active"):scrollTop.classList.remove("active")}));const iconMenu=document.querySelector(".menu__icon"),menuBody=document.querySelector(".menu__body"),welcomeContent=document.querySelector(".welcome__content");iconMenu&&iconMenu.addEventListener("click",(function(e){iconMenu.classList.toggle("_active"),menuBody.classList.toggle("_active"),welcomeContent.classList.toggle("_hide")})),menuBody.addEventListener("click",(function(e){e.target.matches("a")&&(iconMenu.classList.remove("_active"),menuBody.classList.remove("_active"),welcomeContent.classList.remove("_hide"))}));const popupLinks=document.querySelectorAll(".popup-link"),body=document.querySelector("body"),lockPadding=document.querySelectorAll(".lock-padding");let unlock=!0;const timeout=800;if(popupLinks.length>0)for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const o=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(o)),e.preventDefault()}))}const popupCloseIcon=document.querySelectorAll(".close-popup");if(popupCloseIcon.length>0)for(let e=0;e<popupCloseIcon.length;e++){const t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".popup")),e.preventDefault()}))}function popupOpen(e){if(e&&unlock){const t=document.querySelector(".popup.open");t&&popupClose(t,!1),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e=!0){unlock&&e.classList.remove("open")}document.addEventListener("keydown",(function(e){if(27===e.which){popupClose(document.querySelector(".popup.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);const amountTicketsForm=document.forms.amountTickets,popupForm=document.forms.ticketsForm,overviewType=document.querySelector(".overview__type"),inputBasic=document.querySelectorAll(".basicValue"),inputSenior=document.querySelectorAll(".seniorValue"),priceBasic=document.querySelectorAll(".priceBasic"),priceSenior=document.querySelectorAll(".priceSenior"),counterBasic=document.querySelector(".sum-tickets__count_basic"),counterSenior=document.querySelector(".sum-tickets__count_senior"),sumBasic=document.querySelector(".sumBasic"),sumSenior=document.querySelector(".sumSenior"),total=document.querySelectorAll(".total"),ticketTypeRadio=amountTicketsForm.elements.ticketType,typeSelect=popupForm.elements.ticketType,timeSelect=popupForm.elements.timeSelect,overviewTime=document.querySelector(".overview__time"),dateSelect=popupForm.date,overviewDate=document.querySelector(".overview__date");let ticketsData={type:"Permanent exhibition",basic:0,senior:0,priceBasic:20,priceSenior:10,time:"Time",date:"Date"};function setTicketData(){const e=ticketsData.basic*ticketsData.priceBasic,t=ticketsData.senior*ticketsData.priceSenior;overviewType.innerHTML=ticketsData.type,priceBasic.forEach((e=>e.innerHTML=ticketsData.priceBasic)),priceSenior.forEach((e=>e.innerHTML=ticketsData.priceSenior)),total.forEach((o=>o.innerHTML=e+t)),sumBasic.innerHTML=e,sumSenior.innerHTML=t,inputBasic.forEach((e=>e.value=ticketsData.basic)),inputSenior.forEach((e=>e.value=ticketsData.senior)),counterBasic.innerHTML=ticketsData.basic,counterSenior.innerHTML=ticketsData.senior,ticketTypeRadio.value=ticketsData.type,typeSelect.value=ticketsData.type,overviewTime.innerHTML=ticketsData.time,overviewDate.innerHTML=ticketsData.date}function setPermanent(){ticketsData.type="Permanent exhibition",ticketsData.priceBasic=20,ticketsData.priceSenior=10}function setTemporary(){ticketsData.type="Temporary exhibition",ticketsData.priceBasic=25,ticketsData.priceSenior=12.5}function setCombined(){ticketsData.type="Combined admission",ticketsData.priceBasic=40,ticketsData.priceSenior=20}function switchType(e){switch(e.value){case"Permanent exhibition":setPermanent(),setTicketData();break;case"Temporary exhibition":setTemporary(),setTicketData();break;case"Combined admission":setCombined(),setTicketData()}}function passBasicValue(e){e.target.closest("button")&&(ticketsData.basic=this.querySelector(".basicValue").value),setTicketData()}function passSeniorValue(e){e.target.closest("button")&&(ticketsData.senior=this.querySelector(".seniorValue").value),setTicketData()}const amountBasic=document.getElementById("amountBasic");amountBasic.addEventListener("click",passBasicValue);const amountSenior=document.getElementById("amountSenior");amountSenior.addEventListener("click",passSeniorValue);const ticketBasic=document.getElementById("ticketBasic");ticketBasic.addEventListener("click",passBasicValue);const ticketSenior=document.getElementById("ticketSenior");function getDate(){const e=new Date(dateSelect.value);return e.getFullYear()>2020&&e.getFullYear()<3e3?`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]}, ${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]} ${e.getDate()}`:"Invalid date"}ticketSenior.addEventListener("click",passSeniorValue),ticketTypeRadio.forEach((e=>e.addEventListener("change",(function(t){switchType(e)})))),typeSelect.addEventListener("change",(function(e){switchType(typeSelect)})),dateSelect.addEventListener("change",(function(e){overviewDate.innerHTML=getDate(),ticketsData.date=overviewDate.innerHTML,setTicketData()})),timeSelect.addEventListener("change",(function(e){overviewTime.innerHTML=timeSelect.options[timeSelect.selectedIndex].text,ticketsData.time=overviewTime.innerHTML,setTicketData()})),document.addEventListener("DOMContentLoaded",(function(e){ticketsData=JSON.parse(localStorage.ticketsData),setTicketData()})),window.addEventListener("unload",(function(e){localStorage.setItem("ticketsData",JSON.stringify(ticketsData))})),setTicketData();const popup=document.querySelector(".popup"),timeContainerSelect=document.querySelector(".booking-tickets__time-container"),ticketContainerSelect=document.querySelector(".booking-tickets__select-container");function toggleArrow(e){popup.addEventListener("click",(function(t){(t.target==e||e.contains(t.target))&&e.querySelector(".selectArrow").classList.toggle("_active"),!t.target!=e&&e.contains(t.target)||e.querySelector(".selectArrow").classList.remove("_active")})),popup.addEventListener("keyup",(function(t){"Escape"==t.code&&e.querySelector(".selectArrow").classList.remove("_active")}))}toggleArrow(timeContainerSelect),toggleArrow(ticketContainerSelect);const pictureContainer=document.querySelector(".gallery__picture-inner-container"),firstColumn=pictureContainer.children[0],secondColumn=pictureContainer.children[1],thirdColumn=pictureContainer.children[2];function randomImage(e){const t=Array.from(e.children);!function(e){for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}}(t);for(let e=0;e<t.length;e++)t[e].style.order=e}randomImage(firstColumn),randomImage(secondColumn),randomImage(thirdColumn);const animItems=document.querySelectorAll(".gallery__item");if(animItems.length>0){function animOnScroll(){for(let e=0;e<animItems.length;e++){const t=animItems[e],o=t.offsetHeight,n=offset(t).top,i=6;let a=window.innerHeight-o/i;o>window.innerHeight&&(a=window.innerHeight-window.innerHeight/i),pageYOffset>n-a&&pageYOffset<n+o?t.classList.add("_active"):t.classList.contains("_no-hide")||t.classList.remove("_active")}}function offset(e){const t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+o}}window.addEventListener("scroll",animOnScroll),setTimeout((()=>{animOnScroll()}),300)}const sliderExplore=document.querySelector(".slider-explore__slider input"),dragLine=document.querySelector(".slider-explore__slider .slider-explore__line"),images=document.querySelector(".slider-explore__images .slider-explore__img-before");let timerOverlay,timerCursor;sliderExplore.oninput=()=>{let e=sliderExplore.value;dragLine.style.left=e+"%",images.style.width=e+"%"};const muteAudio=()=>{muteBtn.classList.toggle("muted"),mainVideo.muted?mainVideo.muted=!1:mainVideo.muted=!0},fillProgressBar=e=>`\n    linear-gradient(to right, #710707 0%, #710707 ${e}%, #c4c4c4 ${e}%, #c4c4c4 100%)`,displayOverlay=e=>{overlay.innerHTML=e,overlay.classList.remove("hidden"),clearTimeout(timerOverlay),timerOverlay=setTimeout((()=>overlay.classList.add("hidden")),1e3)};document.addEventListener("click",(e=>{switch(e.target.id){case"mainVideo":case"playBtnBig":case"playBtn":mainVideo.paused?mainVideo.play():mainVideo.pause();break;case"muteBtn":muteAudio();break;case"fullscreenBtn":return document.fullscreenElement?document.exitFullscreen():player.requestFullscreen()}})),mainVideo.addEventListener("dblclick",(()=>document.fullscreenElement?document.exitFullscreen():player.requestFullscreen())),document.addEventListener("keyup",(e=>{if(scrollY>2200&&scrollY<4e3){switch(e.code){case"Space":case"KeyK":return mainVideo.paused?mainVideo.play():mainVideo.pause();case"KeyM":muteAudio();break;case"KeyF":return document.fullscreenElement?document.exitFullscreen():player.requestFullscreen()}e.key>=0&&"Space"!==e.code&&(mainVideo.currentTime=e.key*mainVideo.duration/10),e.shiftKey&&"Period"===e.code&&(2===mainVideo.playbackRate?mainVideo.playbackRate=2:mainVideo.playbackRate+=.25),e.shiftKey&&"Comma"===e.code&&(.25===mainVideo.playbackRate?mainVideo.playbackRate=.25:mainVideo.playbackRate-=.25)}})),document.addEventListener("keydown",(e=>{if(document.fullscreenElement&&(player.style.cursor="default",controls.style.opacity=1,clearTimeout(timerCursor),timerCursor=setTimeout((()=>{player.style.cursor="none",controls.style.opacity=0}),3e3)),scrollY>2800&&scrollY<4e3)switch(e.code){case"Space":return e.preventDefault();case"ArrowUp":e.preventDefault(),"progress"!==document.activeElement.id&&(mainVideo.muted?(mainVideo.muted=!1,mainVideo.volume=.05):mainVideo.volume>.95?mainVideo.volume=1:mainVideo.volume+=.05);break;case"ArrowDown":e.preventDefault(),"progress"!==document.activeElement.id&&(mainVideo.muted||(mainVideo.volume<.05?mainVideo.volume=0:mainVideo.volume-=.05));break;case"ArrowLeft":"progress"!==document.activeElement.id&&(mainVideo.currentTime>5?mainVideo.currentTime-=5:mainVideo.currentTime=0,displayOverlay("<< 5 sec"));break;case"ArrowRight":"progress"!==document.activeElement.id&&(mainVideo.currentTime<mainVideo.duration-5?mainVideo.currentTime+=5:mainVideo.currentTime=mainVideo.duration,displayOverlay(">> 5 sec"));break;case"KeyJ":mainVideo.currentTime>10?mainVideo.currentTime-=10:mainVideo.currentTime=0,displayOverlay("<< 10 sec");break;case"KeyL":mainVideo.currentTime<mainVideo.duration-10?mainVideo.currentTime+=10:mainVideo.currentTime=mainVideo.duration,displayOverlay(">> 10 sec");break;case"Period":mainVideo.paused&&!e.shiftKey&&(mainVideo.currentTime+=.17,displayOverlay(">>"));break;case"Comma":mainVideo.paused&&!e.shiftKey&&(mainVideo.currentTime-=.17,displayOverlay("<<"))}})),mainVideo.addEventListener("play",(()=>{playBtn.className="play pause",playBtnBig.className="big-play hidden"})),mainVideo.addEventListener("pause",(()=>{playBtn.className="play",playBtnBig.className="big-play"})),mainVideo.addEventListener("timeupdate",(()=>{isNaN(mainVideo.duration)||(progress.value=100*mainVideo.currentTime/mainVideo.duration,progress.style.background=fillProgressBar(progress.value))})),mainVideo.addEventListener("ratechange",(()=>displayOverlay(`${video.playbackRate}x`))),progress.addEventListener("input",(()=>{mainVideo.currentTime=progress.value*mainVideo.duration/100})),vol.addEventListener("input",(()=>{mainVideo.muted?(mainVideo.muted=!1,mainVideo.volume=.05):mainVideo.volume=vol.value/100}));const changeVolumeByWheel=e=>{let t=100*mainVideo.volume;e.deltaY<0&&!mainVideo.muted?t+=5:e.deltaY<0&&mainVideo.muted?(mainVideo.muted=!1,t=5):e.deltaY>0&&!mainVideo.muted&&(t-=5),mainVideo.volume=t<0?0:t>100?1:t/100};function findVideos(){let e=document.querySelectorAll(".playlist__video");for(let t=0;t<e.length;t++)setupVideo(e[t])}function setupVideo(e){let t=e.querySelector(".playlist__link"),o=e.querySelector(".playlist__media"),n=e.querySelector(".playlist__button"),i=parseMediaURL(o);e.addEventListener("click",(()=>{let o=createIframe(i);t.remove(),n.remove(),e.appendChild(o)})),t.removeAttribute("href"),e.classList.add("video--enabled")}function parseMediaURL(e){return e.alt.match(/https:\/\/youtu\.be\/([a-zA-Z0-9_-]+)/i)[1]}function createIframe(e){let t=document.createElement("iframe");return t.setAttribute("allowfullscreen",""),t.setAttribute("allow","autoplay"),t.setAttribute("src",generateURL(e)),t.classList.add("playlist__media"),t}function generateURL(e){return"https://www.youtube.com/embed/"+e+"?enablejsapi=1&?rel=0&showinfo=0&autoplay=1"}document.addEventListener("fullscreenchange",(e=>{document.fullscreenElement?player.addEventListener("wheel",changeVolumeByWheel):player.removeEventListener("wheel",changeVolumeByWheel)})),mainVideo.addEventListener("volumechange",(()=>{mainVideo.muted?(displayOverlay("muted"),vol.style.background=fillProgressBar(0),vol.value=0):(displayOverlay(`🔊 ${Math.floor(100*mainVideo.volume)}%`),vol.style.background=fillProgressBar(100*mainVideo.volume),vol.value=100*mainVideo.volume,mainVideo.volume<.5&&!muteBtn.classList.contains("vol50")?muteBtn.classList.add("vol50"):mainVideo.volume>=.5&&muteBtn.classList.contains("vol50")&&muteBtn.classList.remove("vol50")),0===mainVideo.volume||mainVideo.muted?muteBtn.classList.add("muted"):muteBtn.classList.remove("muted")})),document.addEventListener("mousemove",(()=>{document.fullscreenElement&&(player.style.cursor="default",controls.style.opacity=1,clearTimeout(timerCursor),timerCursor=setTimeout((()=>{player.style.cursor="none",controls.style.opacity=0}),3e3))})),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement||(clearTimeout(timerCursor),player.style.cursor="default",controls.style.opacity=1)})),$(".playlist__row").slick({array:!0,dots:!0,infinite:!0,slidesToShow:3,slidesToScroll:1,speed:600,draggable:!1,swipe:!1,appendArrows:".video-pagination__arrows",appendDots:".video-pagination__bullets",prevArrow:'<button class="video-pagination__quotes video-pagination__quotes_left"><svg class="video-pagination__quotes-svg"><use xlink:href="#quotes"></use></svg></button>',nextArrow:'<button class="video-pagination__quotes video-pagination__quotes_right"><svg class="video-pagination__quotes-svg"><use xlink:href="#quotes"></use></svg></button>',dotsClass:"video-pagination__bullets",responsive:[{breakpoint:956,settings:{slidesToShow:2}}]}),$(".playlist__row").on("afterChange",(function(e,t,o){mainVideo.src=`video/video${o}.mp4`,mainVideo.poster=`img/video/poster${o}.jpg`,mainVideo.currentTime=0,progress.value=0,progress.style.background="\n                    linear-gradient(to right, #710707 0%, #710707 0%, #c4c4c4 0%, #c4c4c4 100%)",mainVideo.paused?(playBtn.className="play",playBtnBig.className="big-play"):(playBtn.className="play pause",playBtnBig.className="big-play hidden");let n=document.querySelector(".playlist__row").getElementsByTagName("iframe");for(let e of n)e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),findVideos();